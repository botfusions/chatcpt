# ğŸ”§ Webhook BaÄŸlantÄ± Sorunu ve Ã‡Ã¶zÃ¼mÃ¼

## ğŸš¨ Sorun

TarayÄ±cÄ±dan webhook'a baÄŸlanÄ±rken SSL hatasÄ± oluÅŸuyor:
```
Failed to fetch
SSL certificate verification failed
```

## ğŸ” KÃ¶k Neden

**Avast Antivirus** bilgisayarÄ±nÄ±zda SSL/TLS taramasÄ± yapÄ±yor ve kendi sertifikasÄ±nÄ± enjekte ediyor:

```
Issuer: Avast Web/Mail Shield Root
Generated by Avast Antivirus for SSL/TLS scanning
```

Bu, tarayÄ±cÄ±larÄ±n webhook'un gerÃ§ek SSL sertifikasÄ±nÄ± doÄŸrulayamamasÄ±na neden oluyor.

## âœ… DOÄRULAMA: Webhook Ã‡ALIÅIYOR!

curl testi ile webhook'un **aktif ve Ã§alÄ±ÅŸÄ±r durumda** olduÄŸu doÄŸrulandÄ±:

```bash
$ curl -k https://n8n.botfusions.com/webhook/...
HTTP Status: 200 OK
Response: {"output":"Merhaba! ğŸ–ï¸ Test mesajÄ±nÄ±zÄ± aldÄ±m..."}
SÃ¼re: 1.67 saniye
```

**âœ… Webhook Ã§alÄ±ÅŸÄ±yor, sorun sadece tarayÄ±cÄ± SSL doÄŸrulamasÄ±nda!**

## ğŸ› ï¸ Ã‡Ã¶zÃ¼m SeÃ§enekleri

### SeÃ§enek 1: Avast SSL TaramasÄ±nÄ± Kapat (Ã–NERÄ°LEN)

**AdÄ±mlar:**
1. Avast Antivirus'u aÃ§
2. Ayarlar â†’ Koruma â†’ Web Shield
3. "HTTPS taramasÄ±nÄ± etkinleÅŸtir" seÃ§eneÄŸini **KAPAT**
4. BilgisayarÄ± yeniden baÅŸlat
5. Webhook test et

**ArtÄ±larÄ±:**
- âœ… Sorun kalÄ±cÄ± olarak Ã§Ã¶zÃ¼lÃ¼r
- âœ… TÃ¼m HTTPS baÄŸlantÄ±larÄ± dÃ¼zgÃ¼n Ã§alÄ±ÅŸÄ±r
- âœ… BaÅŸka sitelerle de problem olmaz

**Eksileri:**
- âš ï¸ Avast web korumasÄ± azalÄ±r (genellikle sorun olmaz)

---

### SeÃ§enek 2: Chrome/Edge SSL UyarÄ±sÄ±nÄ± Atla

**TarayÄ±cÄ±da:**
1. `chrome://flags/#allow-insecure-localhost` adresine git
2. **"Enabled"** olarak ayarla
3. TarayÄ±cÄ±yÄ± yeniden baÅŸlat

**NOT:** Bu sadece localhost iÃ§in Ã§alÄ±ÅŸÄ±r, uzak sunucular iÃ§in Ã§alÄ±ÅŸmaz.

---

### SeÃ§enek 3: FarklÄ± TarayÄ±cÄ± Kullan

**Firefox** genellikle Avast SSL enjeksiyonundan daha az etkilenir.

**AdÄ±mlar:**
1. Firefox'u indir ve yÃ¼kle
2. `index.html` dosyasÄ±nÄ± Firefox ile aÃ§
3. SSL uyarÄ±sÄ± gelirse "Riski Kabul Et ve Devam Et" seÃ§eneÄŸine tÄ±kla

---

### SeÃ§enek 4: Localhost Proxy Server (GELÄ°ÅMÄ°Å)

Webhook isteklerini localhost Ã¼zerinden proxy'le:

```python
# proxy_server.py
from flask import Flask, request, jsonify
import requests

app = Flask(__name__)
WEBHOOK_URL = "https://n8n.botfusions.com/webhook/..."

@app.route('/webhook', methods=['POST'])
def proxy_webhook():
    response = requests.post(
        WEBHOOK_URL,
        json=request.json,
        verify=False  # SSL bypass
    )
    return response.json(), response.status_code

if __name__ == '__main__':
    app.run(port=8080)
```

Sonra app.js'de:
```javascript
url: 'http://localhost:8080/webhook'
```

---

## ğŸ§ª Test SonuÃ§larÄ±

### âœ… Ã‡alÄ±ÅŸan Testler

1. **curl (SSL bypass):**
   ```bash
   curl -k https://n8n.botfusions.com/webhook/...
   â†’ HTTP 200, JSON yanÄ±t âœ…
   ```

2. **Python requests (verify=False):**
   ```python
   requests.post(url, json=data, verify=False)
   â†’ HTTP 200, JSON yanÄ±t âœ…
   ```

### âŒ Ã‡alÄ±ÅŸmayan Test

1. **TarayÄ±cÄ± fetch() API:**
   ```javascript
   fetch('https://n8n.botfusions.com/webhook/...')
   â†’ Failed to fetch (SSL error) âŒ
   ```

**Neden:** TarayÄ±cÄ±lar gÃ¼venlik nedeniyle SSL sertifikalarÄ±nÄ± doÄŸrulamak zorunda, `verify=false` seÃ§eneÄŸi yok.

---

## ğŸ“‹ HÄ±zlÄ± Ã‡Ã¶zÃ¼m Rehberi

### Åu Anda Ne Durumda?

**Webhook Durumu:** âœ… Ã‡alÄ±ÅŸÄ±yor (curl ile doÄŸrulandÄ±)
**TarayÄ±cÄ± Durumu:** âŒ SSL hatasÄ± veriyor
**Neden:** Avast SSL taramasÄ±

### Hemen YapÄ±lacaklar

**SeÃ§enek A - HÄ±zlÄ± Test (5 dakika):**
1. Firefox indir
2. `index.html`'i Firefox ile aÃ§
3. SSL uyarÄ±sÄ±nÄ± kabul et
4. Mesaj gÃ¶nder ve test et

**SeÃ§enek B - KalÄ±cÄ± Ã‡Ã¶zÃ¼m (10 dakika):**
1. Avast Antivirus'u aÃ§
2. HTTPS taramasÄ±nÄ± kapat
3. PC'yi yeniden baÅŸlat
4. Chrome/Edge ile test et

**SeÃ§enek C - GeliÅŸtirici Modu (15 dakika):**
1. `test_webhook.py` kullan (SSL bypass)
2. Python proxy server kur
3. localhost:8080 Ã¼zerinden kullan

---

## ğŸ¯ Ã–nerilen Aksiyon

**En Pratik Ã‡Ã¶zÃ¼m: Avast HTTPS TaramasÄ±nÄ± Kapat**

1. âœ… KalÄ±cÄ± Ã§Ã¶zÃ¼m
2. âœ… TÃ¼m tarayÄ±cÄ±larda Ã§alÄ±ÅŸÄ±r
3. âœ… BaÅŸka sitelerde de sorun Ã§Ä±kmaz
4. âœ… 10 dakikada hallolur

**Alternatif: Firefox Kullan**
1. âœ… HÄ±zlÄ± test iÃ§in iyi
2. âš ï¸ Her seferinde uyarÄ± Ã§Ä±kabilir
3. âš ï¸ GeÃ§ici Ã§Ã¶zÃ¼m

---

## ğŸ“ Debug KomutlarÄ±

**Webhook Ã§alÄ±ÅŸÄ±yor mu?**
```bash
curl -k https://n8n.botfusions.com/webhook/a5015f1b-85e2-417f-8c95-d4b91698ec6e \
  -X POST \
  -H "Content-Type: application/json" \
  -d '{"message":"test","conversation_id":"test_123"}'
```

**Sertifika kimden?**
```bash
curl -v https://n8n.botfusions.com 2>&1 | grep "Issuer"
```

EÄŸer "Avast" gÃ¶rÃ¼yorsanÄ±z â†’ Avast SSL taramasÄ± aktif.

---

## ğŸ“Š SonuÃ§

| Test | Durum | AÃ§Ä±klama |
|------|-------|----------|
| Webhook API | âœ… Ã‡alÄ±ÅŸÄ±yor | n8n yanÄ±t veriyor |
| curl | âœ… Ã‡alÄ±ÅŸÄ±yor | SSL bypass ile test OK |
| Python | âœ… Ã‡alÄ±ÅŸÄ±yor | verify=False ile OK |
| TarayÄ±cÄ± | âŒ Hata | Avast SSL enjeksiyonu |

**Webhook sorunsuz Ã§alÄ±ÅŸÄ±yor, sadece tarayÄ±cÄ± SSL doÄŸrulamasÄ± engelliyor.**

---

**GÃ¼ncelleme:** 2025-10-01
**Webhook URL:** `https://n8n.botfusions.com/webhook/a5015f1b-85e2-417f-8c95-d4b91698ec6e`
**Durum:** Aktif ve Ã§alÄ±ÅŸÄ±yor âœ…
